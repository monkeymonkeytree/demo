<!DOCTYPE html>
<html>
<head>
    <title>userDeviceManage</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <link href="/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="/data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="/files/userdevicemanage/styles.css" type="text/css" rel="stylesheet"/>
    <script src="/scripts/jquery-3.2.1.min.js"></script>
    <script src="/scripts/myscripts/userdevicemanage.js"></script>
    <script src="/scripts/axure/axQuery.js"></script>
    <script src="/scripts/axure/globals.js"></script>
    <script src="/scripts/axutils.js"></script>
    <script src="/scripts/axure/annotation.js"></script>
    <script src="/scripts/axure/axQuery.std.js"></script>
    <script src="/scripts/axure/doc.js"></script>
    <script src="/scripts/messagecenter.js"></script>
    <script src="/scripts/axure/events.js"></script>
    <script src="/scripts/axure/recording.js"></script>
    <script src="/scripts/axure/action.js"></script>
    <script src="/scripts/axure/expr.js"></script>
    <script src="/scripts/axure/geometry.js"></script>
    <script src="/scripts/axure/flyout.js"></script>
    <script src="/scripts/axure/model.js"></script>
    <script src="/scripts/axure/repeater.js"></script>
    <script src="/scripts/axure/sto.js"></script>
    <script src="/scripts/axure/utils.temp.js"></script>
    <script src="/scripts/axure/variables.js"></script>
    <script src="/scripts/axure/drag.js"></script>
    <script src="/scripts/axure/move.js"></script>
    <script src="/scripts/axure/visibility.js"></script>
    <script src="/scripts/axure/style.js"></script>
    <script src="/scripts/axure/adaptive.js"></script>
    <script src="/scripts/axure/tree.js"></script>
    <script src="/scripts/axure/init.temp.js"></script>
    <script src="/scripts/axure/legacy.js"></script>
    <script src="/scripts/axure/viewer.js"></script>
    <script src="/scripts/axure/math.js"></script>
    <script src="/scripts/axure/jquery.nicescroll.min.js"></script>
    <script src="/data/document.js"></script>
    <script src="/files/userdevicemanage/data.js"></script>
    <script type="text/javascript">
        $axure.utils.getTransparentGifPath = function () {
            return '/images/transparent.gif';
        };
        $axure.utils.getOtherPath = function () {
            return '/Other.html';
        };
        $axure.utils.getReloadPath = function () {
            return '/reload.html';
        };
    </script>
</head>
<body>

<div id="base" class="">


    <!-- gpFunctionSelection (Group) -->
    <div id="u99" class="ax_default" data-label="gpFunctionSelection" data-left="0" data-top="0" data-width="128"
         data-height="1080">

        <!-- Unnamed (Rectangle) -->
        <div id="u100" class="ax_default shape">
            <div id="u100_div" class=""></div>
            <div id="u100_text" class="text " style="display:none; visibility: hidden">
                <p></p>
            </div>
        </div>

        <!-- lblHomePage (Rectangle) -->
        <div id="u101" class="ax_default label" data-label="lblHomePage">
            <div id="u101_div" class=""></div>
            <div id="u101_text" class="text ">
                <p><span style="text-decoration:none;">主页</span></p>
            </div>
        </div>

        <!-- lblUserCenter (Rectangle) -->
        <div id="u102" class="ax_default label" data-label="lblUserCenter">
            <div id="u102_div" class=""></div>
            <div id="u102_text" class="text ">
                <p><span style="text-decoration:none;">用户中心</span></p>
            </div>
        </div>

        <!-- lblDeviceManage (Rectangle) -->
        <div id="u103" class="ax_default label" data-label="lblDeviceManage">
            <div id="u103_div" class=""></div>
            <div id="u103_text" class="text ">
                <p><span style="text-decoration:none;">设备管理</span></p>
            </div>
        </div>
    </div>

    <!-- dpHead (Dynamic Panel) -->
    <div id="u104" class="ax_default" data-label="dpHead">
        <div id="u104_state0" class="panel_state" data-label="State1" style="">
            <div id="u104_state0_content" class="panel_state_content">
            </div>
        </div>
    </div>

    <!-- lblLogout (Rectangle) -->
    <a id="u105" class="ax_default label" data-label="lblLogout" style="text-decoration: none" href="/logout">
        退出登录
    </a>

    <!-- Unnamed (Rectangle) -->
    <div id="u106" class="ax_default shape">
        <div id="u106_div" class=""></div>
        <div id="u106_text" class="text ">
            <p><span style="text-decoration:none;">我的物联网云平台</span></p>
        </div>
    </div>

    <!-- Unnamed (Image) -->
    <div id="u107" class="ax_default image">
        <img id="u107_img" class="img " src="/images/homepage/u8.jpeg"/>
        <div id="u107_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u108" class="ax_default heading_3">
        <div id="u108_div" class=""></div>
        <div id="u108_text" class="text ">
            <p><span style="text-decoration:none;">设备添加</span></p>
        </div>
    </div>


    <!-- dpDevices (Dynamic Panel) -->
    <div id="u112" class="ax_default" data-label="dpDevices">
        <div id="u112_state0" class="panel_state" data-label="State1" style="">
            <div id="u112_state0_content" class="panel_state_content">

                <!-- rpDevices (Repeater) -->


                <!-- rName (Rectangle) -->
                <div id="u122" class="ax_default box_1" data-label="rName">
                    <div id="u122_div" class=""></div>
                    <div id="u122_text" class="text ">
                        <p><span style="text-decoration:none;">设备名称</span></p>
                    </div>
                </div>

                <!-- rEmail (Rectangle) -->
                <div id="u123" class="ax_default box_1" data-label="rEmail">
                    <div id="u123_div" class=""></div>
                    <div id="u123_text" class="text ">
                        <p><span style="text-decoration:none;">数据更新时间</span></p>
                    </div>
                </div>

                <!-- rAge (Rectangle) -->
                <div id="u124" class="ax_default box_1" data-label="rAge">
                    <div id="u124_div" class=""></div>
                    <div id="u124_text" class="text ">
                        <p><span style="text-decoration:none;">在线/离线</span></p>
                    </div>
                </div>

                <!-- rRole (Rectangle) -->
                <div id="u125" class="ax_default box_1" data-label="rRole">
                    <div id="u125_div" class=""></div>
                    <div id="u125_text" class="text ">
                        <p><span style="text-decoration:none;">数据类型</span></p>
                    </div>
                </div>

                <!-- rPassword (Rectangle) -->
                <div id="u126" class="ax_default box_1" data-label="rPassword">
                    <div id="u126_div" class=""></div>
                    <div id="u126_text" class="text ">
                        <p><span style="text-decoration:none;">操作</span></p>
                    </div>
                </div>

                <!-- txtName (Text Field) -->
                <div id="u127" class="ax_default text_field" data-label="txtName">
                    <div id="u127_div" class=""></div>
                    <input id="u127_input" type="text" value="" class="u127_input"/>
                </div>

                <!-- selDeviceType (Droplist) -->
                <div id="u128" class="ax_default droplist" data-label="selDeviceType">
                    <div id="u128_div" class=""></div>
                    <select id="u128_input" class="u128_input">
                        <option class="u128_input_option" selected value="数值测量值型">数值测量值型</option>
                        <option class="u128_input_option" value="开关状态型">开关状态型</option>
                        <option class="u128_input_option" value="地理位置定位型">地理位置定位型</option>
                        <option class="u128_input_option" value="文本预警消息型">文本预警消息型</option>
                    </select>
                </div>

                <!-- btnAddDevice (Rectangle) -->
                <div id="u129" class="ax_default button" data-label="btnAddDevice">
                    <div id="u129_div" class=""></div>
                    <div id="u129_text" class="text ">
                        <p><span style="text-decoration:none;">添加设备</span></p>
                    </div>
                </div>

                <div style="  border-width:0px;
  position:absolute;
  top:100px;
  width:80px;
  height:25px;
  display:flex;">

                    <div class="text " style="  border-width:0px;
  word-wrap:break-word;
  text-transform:none;">
                        <p>

                    </div>
                </div>


                <!-- rLatestTimestamp (Rectangle) -->
                <div id="u131" class="ax_default box_1" data-label="rLatestTimestamp">
                    <div id="u131_div" class=""></div>
                    <div id="u131_text" class="text " style="display:none; visibility: hidden">
                        <p></p>
                    </div>
                </div>

                <!-- selOnline (Droplist) -->
                <div id="u132" class="ax_default droplist" data-label="selOnline">
                    <div id="u132_div" class=""></div>
                    <select id="u132_input" class="u132_input">
                        <option class="u132_input_option" selected value="是">是</option>
                        <option class="u132_input_option" value="否">否</option>
                    </select>
                </div>
            </div>


        </div>


    </div>

    <div style=" position: absolute; top: 300px; left: 200px">

        <h3>展示设备</h3>
        <table style="border: black 0.5px solid; " width="840px" cellpadding="0">
            <tr>
                <th width="100px">ID</th>
                <th width="100px">设备名称</th>
                <th width="150px">数据更新时间</th>
                <th>离线/在线</th>
                <th>数据类型</th>
                <th>操作</th>
            </tr>
        </table>

        <div>
            <table id="Mytable" style="border: black 0.5px solid;" cellpadding="0">

            </table>
        </div>

        <h3>查看数据</h3>
        <span>选择设备</span>&nbsp;&nbsp;&nbsp;&nbsp;
        <select id="option" width="100px">
            <option value="全部 ">全部</option>
        </select>&nbsp;&nbsp;&nbsp;&nbsp;

        <span>选择数据源</span>
        <select id="u131_input" class="u131_input">
            <option class="u131_input_option" selected="" value="实时（来自MQTT）">实时（来自MQTT）</option>
            <option class="u131_input_option" value="历史（来自MongoDB）">历史（来自MongoDB）</option>
        </select>

        <br/>
        <br/>

        <table width="400px" cellpadding="0" style="border: black  1px solid">
            <th>name</th>
            <th>updateTime</th>
            <th>value</th>
        </table>
        <table id="data">

        </table>

    </div>
</div>


<script>
    $("#Mytable").on("click", ".modify", function () {


        var id = $(this).closest("tr").find("td input").eq(0).val();
        var name = $(this).closest("tr").find("td input").eq(1).val();
        var updateTime = $(this).closest("tr").find("td input").eq(2).val();
        var status = $(this).closest("tr").find("td select").eq(0).val();
        var type = $(this).closest("tr").find("td select").eq(1).val();



        if (status == "是") {
            status = "在线";
        } else {
            status = "离线";
        }
        if (name == "") {
            alert("设备名称不能为空哦！");
            return false;
        }


        if (confirm("你确定要更新吗?")) {
            $.ajax({
                url: 'http://localhost:8080/updateCGQ',
                data: 'id=' + id + '&name=' + name + "&updateTime=" + updateTime + "&status=" + status + "&type=" + type,
                type: 'PUT',
                success: function (msg) {
                    alert(msg.msg);
                },
                error: function () {
                    alert("更新失败！")
                },
                dataType: 'json'
            })
        }
        location.reload();
    })


    $("#Mytable").on("click", ".delete", function () {


        var id = $(this).closest("tr").find("td input").eq(0).val();


        if (confirm("你确定要删除吗吗?")) {
            $.ajax({
                url: 'http://localhost:8080/deleteMyCGQ',
                data: 'id=' + id,
                type: 'delete',
                success: function (msg) {
                    alert(msg.msg);
                },
                error: function () {
                    alert("删除失败！")
                },
                dataType: 'json'
            })
        }
        location.reload();
    })

</script>

<script src="/scripts/axure/ios.js"></script>
</body>
</html>
